<!-- Header -->
<mat-toolbar color="primary" class="d-flex justify-content-between">
  <div class="d-flex align-items-center">
    <img src="assets/logo-skandia.png" alt="Skandia" height="30" class="me-2" />
    <span>Plan Financiero Digital - FPX</span>
  </div>
  <div>
    <a mat-button color="accent">Tu Financial Planner</a>
    <a mat-button color="accent">Aportes</a>
  </div>
</mat-toolbar>

<!-- Contenido -->
<div class="container mt-4">
  <!-- Mensaje principal -->
  <mat-card class="text-center p-4 highlight-card">
    <h2>¡Tu objetivo ha sido agregado exitosamente!</h2>
    <p>Te hemos enviado un correo con la notificación.</p>

    <div class="d-flex justify-content-between flex-wrap my-3">
      <div><strong>Conocer mi sobrino</strong><br><small>Categoría: Bienestar</small></div>
      <div><strong>Lograrás:</strong><br> <span class="highlight">$6.000.000</span></div>
      <div><strong>Ya cuentas con:</strong><br> <span>$0</span></div>
    </div>

    <button mat-stroked-button color="primary">Revisar objetivo</button>
  </mat-card>

  <!-- Subtítulo -->
  <h3 class="text-center mt-4">
    ¡Vamos por esos <span class="highlight">$6.000.000</span> para <b>Conocer mi sobrino!</b>
  </h3>
  <p class="text-center text-muted">
    A través de tus productos y nuestros rendimientos podremos lograrlo.
  </p>

  <!-- Tarjetas de productos -->
  <div class="row g-3 mt-3" *ngIf="!loading && !error; else statusTemplate">
    <div class="col-md-4" *ngFor="let card of cards">
      <mat-card class="product-card">
        <mat-card-header>
          <mat-checkbox></mat-checkbox>
          <mat-card-title>{{ card.nameProduct }}</mat-card-title>
          <mat-card-subtitle>#{{ card.numberProduct }}</mat-card-subtitle>
        </mat-card-header>
        <mat-card-content>
          <p><strong>Ya cuentas con:</strong></p>
          <p class="value">${{ formatBalance(card.balanceProduct) }}</p>
          <p class="small text-muted">{{ card.detaildProduct }}</p>
        </mat-card-content>
      </mat-card>
    </div>
  </div>

  <!-- Estados de carga y error -->
  <ng-template #statusTemplate>
    <div class="text-center mt-4" *ngIf="loading">
      <mat-card>
        <mat-card-content>
          <p>Cargando productos...</p>
        </mat-card-content>
      </mat-card>
    </div>
    <div class="text-center mt-4" *ngIf="error">
      <mat-card>
        <mat-card-content>
          <p class="text-danger">{{ error }}</p>
          <button mat-raised-button color="primary" (click)="loadCards()">Reintentar</button>
        </mat-card-content>
      </mat-card>
    </div>
  </ng-template>

  <!-- Mensaje cuando no hay productos -->
  <div class="text-center mt-4" *ngIf="!loading && !error && cards.length === 0">
    <mat-card>
      <mat-card-content>
        <p>No se encontraron productos para mostrar.</p>
      </mat-card-content>
    </mat-card>
  </div>

  <!-- Botón principal -->
  <div class="text-center my-4">
    <button mat-raised-button color="accent">Asociar a objetivo</button>
  </div>
</div>

<!-- Footer -->
<footer class="footer bg-light p-3 mt-4">
  <div class="container d-flex justify-content-between flex-wrap">
    <div>
      <img src="assets/logo-skandia.png" alt="Skandia" height="25" />
      <p class="m-0">© 2019 Skandia</p>
    </div>
    <div>
      <a href="#">Términos y Condiciones</a> | 
      <a href="#">Política de Datos</a>
    </div>
  </div>
</footer>
